<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width-device-width, initial-scale-1">
<title>EncURL - Home</title>
<style type="text/css">
    @import url(style.css);
</style>
<script src = "https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<!--Função Para Encurtar URL-->
<script>
        function EncURL() {
            var valor = document.getElementById("link").value; /// Acessando URL original no form
            $.getJSON("https://is.gd/create.php?callback=?", { /// Retornando dados do servidor em formato JSON
                url: valor,
                format: "json"
            }).done(function (data) { /// Chamada da função com os dados retornados como parâmetro
                let novaUrl = data.shorturl;
                console.log(novaUrl);
                if (novaUrl !== undefined) /// Testando link 
                {
                    document.getElementById("url_encurtada").innerHTML = novaUrl;
                } else
                {
                    document.getElementById("url_encurtada").innerHTML = "Erro ao gerar link";
                }
            });
        }
</script>
</head>
<body>
    <!--Formulário de Entrada de Dados-->
    <form id="furl">
        <input type="text" name="link" id="link" placeholder="Insira a URL">
        <input type="button" onclick="EncURL()" value="Gerar URL">
    </form>
    <p>Link Gerado:</p>
    <p id="url_encurtada"></p>
</body>
</html>